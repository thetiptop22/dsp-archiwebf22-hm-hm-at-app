"use strict";var isWindows="win32"===process.platform,util=require("util");function normalizeArray(t,r){for(var e=[],i=0;i<t.length;i++){var n=t[i];n&&"."!==n&&(".."===n?e.length&&".."!==e[e.length-1]?e.pop():r&&e.push(".."):e.push(n))}return e}function trimArray(t){for(var r=t.length-1,e=0;e<=r&&!t[e];e++);for(var i=r;i>=0&&!t[i];i--);return 0===e&&i===r?t:e>i?[]:t.slice(e,i+1)}var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,splitTailRe=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,win32={};function win32SplitPath(t){var r=splitDeviceRe.exec(t),e=(r[1]||"")+(r[2]||""),i=r[3]||"",n=splitTailRe.exec(i);return[e,n[1],n[2],n[3]]}function win32StatPath(t){var r=splitDeviceRe.exec(t),e=r[1]||"",i=!!e&&":"!==e[1];return{device:e,isUnc:i,isAbsolute:i||!!r[2],tail:r[3]}}function normalizeUNCRoot(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}win32.resolve=function(){for(var t="",r="",e=!1,i=arguments.length-1;i>=-1;i--){var n;if(i>=0?n=arguments[i]:t?(n=process.env["="+t])&&n.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(n=t+"\\"):n=process.cwd(),!util.isString(n))throw new TypeError("Arguments to path.resolve must be strings");if(n){var o=win32StatPath(n),s=o.device,a=o.isUnc,l=o.isAbsolute,u=o.tail;if((!s||!t||s.toLowerCase()===t.toLowerCase())&&(t||(t=s),e||(r=u+"\\"+r,e=l),t&&e))break}}return a&&(t=normalizeUNCRoot(t)),t+(e?"\\":"")+(r=normalizeArray(r.split(/[\\\/]+/),!e).join("\\"))||"."},win32.normalize=function(t){var r=win32StatPath(t),e=r.device,i=r.isUnc,n=r.isAbsolute,o=r.tail,s=/[\\\/]$/.test(o);return(o=normalizeArray(o.split(/[\\\/]+/),!n).join("\\"))||n||(o="."),o&&s&&(o+="\\"),i&&(e=normalizeUNCRoot(e)),e+(n?"\\":"")+o},win32.isAbsolute=function(t){return win32StatPath(t).isAbsolute},win32.join=function(){for(var t=[],r=0;r<arguments.length;r++){var e=arguments[r];if(!util.isString(e))throw new TypeError("Arguments to path.join must be strings");e&&t.push(e)}var i=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),win32.normalize(i)},win32.relative=function(t,r){t=win32.resolve(t),r=win32.resolve(r);for(var e=t.toLowerCase(),i=r.toLowerCase(),n=trimArray(r.split("\\")),o=trimArray(e.split("\\")),s=trimArray(i.split("\\")),a=Math.min(o.length,s.length),l=a,u=0;u<a;u++)if(o[u]!==s[u]){l=u;break}if(0==l)return r;var p=[];for(u=l;u<o.length;u++)p.push("..");return(p=p.concat(n.slice(l))).join("\\")},win32._makeLong=function(t){if(!util.isString(t))return t;if(!t)return"";var r=win32.resolve(t);return/^[a-zA-Z]\:\\/.test(r)?"\\\\?\\"+r:/^\\\\[^?.]/.test(r)?"\\\\?\\UNC\\"+r.substring(2):t},win32.dirname=function(t){var r=win32SplitPath(t),e=r[0],i=r[1];return e||i?(i&&(i=i.substr(0,i.length-1)),e+i):"."},win32.basename=function(t,r){var e=win32SplitPath(t)[2];return r&&e.substr(-1*r.length)===r&&(e=e.substr(0,e.length-r.length)),e},win32.extname=function(t){return win32SplitPath(t)[3]},win32.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var r=t.root||"";if(!util.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var e=t.dir,i=t.base||"";return e?e[e.length-1]===win32.sep?e+i:e+win32.sep+i:i},win32.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var r=win32SplitPath(t);if(!r||4!==r.length)throw new TypeError("Invalid path '"+t+"'");return{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}},win32.sep="\\",win32.delimiter=";";var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,posix={};function posixSplitPath(t){return splitPathRe.exec(t).slice(1)}posix.resolve=function(){for(var t="",r=!1,e=arguments.length-1;e>=-1&&!r;e--){var i=e>=0?arguments[e]:process.cwd();if(!util.isString(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i[0])}return(r?"/":"")+(t=normalizeArray(t.split("/"),!r).join("/"))||"."},posix.normalize=function(t){var r=posix.isAbsolute(t),e=t&&"/"===t[t.length-1];return(t=normalizeArray(t.split("/"),!r).join("/"))||r||(t="."),t&&e&&(t+="/"),(r?"/":"")+t},posix.isAbsolute=function(t){return"/"===t.charAt(0)},posix.join=function(){for(var t="",r=0;r<arguments.length;r++){var e=arguments[r];if(!util.isString(e))throw new TypeError("Arguments to path.join must be strings");e&&(t+=t?"/"+e:e)}return posix.normalize(t)},posix.relative=function(t,r){t=posix.resolve(t).substr(1),r=posix.resolve(r).substr(1);for(var e=trimArray(t.split("/")),i=trimArray(r.split("/")),n=Math.min(e.length,i.length),o=n,s=0;s<n;s++)if(e[s]!==i[s]){o=s;break}var a=[];for(s=o;s<e.length;s++)a.push("..");return(a=a.concat(i.slice(o))).join("/")},posix._makeLong=function(t){return t},posix.dirname=function(t){var r=posixSplitPath(t),e=r[0],i=r[1];return e||i?(i&&(i=i.substr(0,i.length-1)),e+i):"."},posix.basename=function(t,r){var e=posixSplitPath(t)[2];return r&&e.substr(-1*r.length)===r&&(e=e.substr(0,e.length-r.length)),e},posix.extname=function(t){return posixSplitPath(t)[3]},posix.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var r=t.root||"";if(!util.isString(r))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+posix.sep:"")+(t.base||"")},posix.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var r=posixSplitPath(t);if(!r||4!==r.length)throw new TypeError("Invalid path '"+t+"'");return r[1]=r[1]||"",r[2]=r[2]||"",r[3]=r[3]||"",{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}},posix.sep="/",posix.delimiter=":",module.exports=isWindows?win32:posix,module.exports.posix=posix,module.exports.win32=win32;